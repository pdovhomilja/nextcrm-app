// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model crm_Accounts {
  id                   String    @id @default(uuid()) @db.Uuid
  v                    Int       @map("__v")
  createdAt            DateTime  @default(now())
  createdBy            String?   @db.Uuid
  updatedAt            DateTime? @updatedAt
  updatedBy            String?   @db.Uuid
  annual_revenue       String?
  assigned_to          String?   @db.Uuid
  billing_city         String?
  billing_country      String?
  billing_postal_code  String?
  billing_state        String?
  billing_street       String?
  company_id           String?
  description          String?
  email                String?
  employees            String?
  fax                  String?
  industry             String?   @db.Uuid
  member_of            String?
  name                 String
  office_phone         String?
  shipping_city        String?
  shipping_country     String?
  shipping_postal_code String?
  shipping_state       String?
  shipping_street      String?
  status               String?   @default("Inactive")
  type                 String?   @default("Customer")
  vat                  String?
  website              String?

  invoices           Invoices[]
  contacts           crm_Contacts[]
  leads              crm_Leads[]
  industry_type      crm_Industry_Type?    @relation(fields: [industry], references: [id])
  opportunities      crm_Opportunities[]
  assigned_to_user   Users?                @relation("AccountAssignedTo", fields: [assigned_to], references: [id])
  crm_accounts_tasks crm_Accounts_Tasks[]
  contracts          crm_Contracts[]
  documents          DocumentsToAccounts[]
  watchers           AccountWatchers[]

  @@index([assigned_to])
  @@index([industry])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([status])
  @@index([type])
  @@index([createdAt])
}

model crm_Leads {
  id String @id @default(uuid()) @db.Uuid
  v  Int    @default(0) @map("__v")

  createdAt         DateTime?          @default(now())
  createdBy         String?            @db.Uuid
  updatedAt         DateTime?          @updatedAt
  updatedBy         String?            @db.Uuid
  firstName         String?
  lastName          String
  company           String?
  jobTitle          String?
  email             String?
  phone             String?
  description       String?
  lead_source       String?
  refered_by        String?
  campaign          String?
  status            String?            @default("NEW")
  type              String?            @default("DEMO")
  assigned_to       String?            @db.Uuid
  assigned_to_user  Users?             @relation("LeadAssignedTo", fields: [assigned_to], references: [id])
  accountsIDs       String?            @db.Uuid
  assigned_accounts crm_Accounts?      @relation(fields: [accountsIDs], references: [id])
  documents         DocumentsToLeads[]

  @@index([assigned_to])
  @@index([accountsIDs])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([status])
  @@index([type])
  @@index([createdAt])
}

enum crm_Lead_Status {
  NEW
  CONTACTED
  QUALIFIED
  LOST
}

enum crm_Lead_Type {
  DEMO
}

model crm_Opportunities {
  id               String                  @id @default(uuid()) @db.Uuid
  v                Int                     @default(0) @map("__v")
  account          String?                 @db.Uuid
  assigned_to      String?                 @db.Uuid
  budget           BigInt                  @default(0)
  campaign         String?                 @db.Uuid
  close_date       DateTime?
  contact          String?                 @db.Uuid
  created_by       String?                 @db.Uuid
  createdBy        String?                 @db.Uuid
  created_on       DateTime?               @default(now())
  createdAt        DateTime                @default(now())
  last_activity    DateTime?
  updatedAt        DateTime?               @updatedAt
  updatedBy        String?                 @db.Uuid
  last_activity_by String?                 @db.Uuid
  currency         String?
  description      String?
  expected_revenue BigInt                  @default(0)
  name             String?
  next_step        String?
  sales_stage      String?                 @db.Uuid
  type             String?                 @db.Uuid
  status           crm_Opportunity_Status? @default(ACTIVE)

  assigned_type        crm_Opportunities_Type?         @relation(fields: [type], references: [id])
  assigned_sales_stage crm_Opportunities_Sales_Stages? @relation("assinged_sales_stage", fields: [sales_stage], references: [id])
  assigned_to_user     Users?                          @relation("assigned_to_user_relation", fields: [assigned_to], references: [id])
  created_by_user      Users?                          @relation("created_by_user_relation", fields: [created_by], references: [id])
  assigned_account     crm_Accounts?                   @relation(fields: [account], references: [id])
  assigned_campaings   crm_campaigns?                  @relation(fields: [campaign], references: [id])
  documents            DocumentsToOpportunities[]
  contacts             ContactsToOpportunities[]

  @@index([account])
  @@index([assigned_to])
  @@index([campaign])
  @@index([contact])
  @@index([created_by])
  @@index([sales_stage])
  @@index([type])
  @@index([status])
  @@index([createdAt])
  @@index([close_date])
  @@index([status, sales_stage])
}

enum crm_Opportunity_Status {
  ACTIVE
  INACTIVE
  PENDING
  CLOSED
}

model crm_campaigns {
  id            String              @id @default(uuid()) @db.Uuid
  v             Int                 @map("__v")
  name          String
  description   String?
  status        String?
  opportunities crm_Opportunities[]
}

model crm_Opportunities_Sales_Stages {
  id                                 String              @id @default(uuid()) @db.Uuid
  v                                  Int                 @map("__v")
  name                               String
  probability                        BigInt?
  order                              BigInt?
  assigned_opportunities_sales_stage crm_Opportunities[] @relation("assinged_sales_stage")
}

model crm_Opportunities_Type {
  id                     String              @id @default(uuid()) @db.Uuid
  v                      Int                 @map("__v")
  name                   String
  order                  BigInt?
  assigned_opportunities crm_Opportunities[]
}

model crm_Contacts {
  id               String    @id @default(uuid()) @db.Uuid
  v                Int       @default(0) @map("__v")
  account          String?   @db.Uuid
  assigned_to      String?   @db.Uuid
  birthday         String?
  created_by       String?   @db.Uuid
  createdBy        String?   @db.Uuid
  created_on       DateTime? @default(now())
  cratedAt         DateTime? @default(now())
  last_activity    DateTime? @default(now())
  updatedAt        DateTime? @updatedAt
  updatedBy        String?   @db.Uuid
  last_activity_by String?   @db.Uuid
  description      String?
  email            String?
  personal_email   String?
  first_name       String?
  last_name        String
  office_phone     String?
  mobile_phone     String?
  website          String?
  position         String?
  status           Boolean   @default(true)
  social_twitter   String?
  social_facebook  String?
  social_linkedin  String?
  social_skype     String?
  social_instagram String?
  social_youtube   String?
  social_tiktok    String?
  type             String?   @default("Customer")
  tags             String[]
  notes            String[]

  assigned_to_user  Users?                    @relation("assigned_contacts", fields: [assigned_to], references: [id])
  crate_by_user     Users?                    @relation("created_contacts", fields: [created_by], references: [id])
  accountsIDs       String?                   @db.Uuid
  assigned_accounts crm_Accounts?             @relation(fields: [accountsIDs], references: [id])
  opportunities     ContactsToOpportunities[]
  documents         DocumentsToContacts[]

  @@index([assigned_to])
  @@index([created_by])
  @@index([accountsIDs])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([status])
  @@index([type])
  @@index([cratedAt])
  @@index([last_activity])
}

enum crm_Contact_Type {
  Customer
  Partner
  Vendor
  Prospect
}

model crm_Contracts {
  id                  String               @id @default(uuid()) @db.Uuid
  v                   Int                  @map("__v")
  title               String
  value               Int
  startDate           DateTime?            @default(now())
  endDate             DateTime?
  renewalReminderDate DateTime?
  customerSignedDate  DateTime?
  companySignedDate   DateTime?
  description         String?
  account             String?              @db.Uuid
  assigned_to         String?              @db.Uuid
  createdAt           DateTime?            @default(now())
  createdBy           String?              @db.Uuid
  updatedAt           DateTime?            @updatedAt
  updatedBy           String?              @db.Uuid
  status              crm_Contracts_Status @default(NOTSTARTED)
  type                String?

  assigned_account crm_Accounts? @relation(fields: [account], references: [id])
  assigned_to_user Users?        @relation(fields: [assigned_to], references: [id])

  @@index([account])
  @@index([assigned_to])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([status])
  @@index([startDate])
  @@index([endDate])
  @@index([createdAt])
  @@index([startDate, endDate])
}

enum crm_Contracts_Status {
  NOTSTARTED
  INPROGRESS
  SIGNED
}

model Boards {
  id                String    @id @default(uuid()) @db.Uuid
  v                 Int       @map("__v")
  description       String
  favourite         Boolean?
  favouritePosition BigInt?
  icon              String?
  position          BigInt?
  title             String
  user              String    @db.Uuid
  visibility        String?
  sharedWith        String[]  @db.Uuid
  createdAt         DateTime? @default(now())
  createdBy         String?   @db.Uuid
  updatedAt         DateTime? @updatedAt
  updatedBy         String?   @db.Uuid

  assigned_user Users?          @relation("assigned_user", fields: [user], references: [id])
  sections      Sections[]
  watchers      BoardWatchers[]

  @@index([user])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([favourite])
  @@index([visibility])
  @@index([createdAt])
  @@index([user, favourite])
}

model Employees {
  id     String  @id @default(uuid()) @db.Uuid
  v      Int     @map("__v")
  avatar String
  email  String?
  name   String
  salary BigInt
  status String
}

model ImageUpload {
  id String @id @default(uuid()) @db.Uuid
}

model MyAccount {
  id                   String  @id @default(uuid()) @db.Uuid
  v                    Int     @map("__v")
  company_name         String
  is_person            Boolean @default(false)
  email                String?
  email_accountant     String?
  phone_prefix         String?
  phone                String?
  mobile_prefix        String?
  mobile               String?
  fax_prefix           String?
  fax                  String?
  website              String?
  // office Address
  street               String?
  city                 String?
  state                String?
  zip                  String?
  country              String?
  country_code         String?
  // billing Address
  billing_street       String?
  billing_city         String?
  billing_state        String?
  billing_zip          String?
  billing_country      String?
  billing_country_code String?
  //other
  currency             String?
  currency_symbol      String?
  VAT_number           String
  TAX_number           String?
  bank_name            String?
  bank_account         String?
  bank_code            String?
  bank_IBAN            String?
  bank_SWIFT           String?
}

model Invoices {
  id                            String    @id @default(uuid()) @db.Uuid
  v                             Int?      @map("__v")
  date_created                  DateTime  @default(now())
  last_updated                  DateTime  @updatedAt
  last_updated_by               String?   @db.Uuid
  date_received                 DateTime? @default(now())
  date_of_case                  DateTime?
  date_tax                      DateTime?
  date_due                      DateTime?
  description                   String?
  document_type                 String?
  favorite                      Boolean?  @default(false)
  variable_symbol               String?
  constant_symbol               String?
  specific_symbol               String?
  order_number                  String?
  internal_number               String?
  invoice_number                String?
  invoice_amount                String?
  invoice_file_mimeType         String
  invoice_file_url              String
  invoice_items                 Json?     @db.JsonB
  invoice_type                  String?
  invoice_currency              String?
  invoice_language              String?
  partner                       String?
  partner_street                String?
  partner_city                  String?
  partner_zip                   String?
  partner_country               String?
  partner_country_code          String?
  partner_business_street       String?
  partner_business_city         String?
  partner_business_zip          String?
  partner_business_country      String?
  partner_business_country_code String?
  partner_VAT_number            String?
  partner_TAX_number            String?
  partner_TAX_local_number      String?
  partner_phone_prefix          String?
  partner_phone_number          String?
  partner_fax_prefix            String?
  partner_fax_number            String?
  partner_email                 String?
  partner_website               String?
  partner_is_person             Boolean?
  partner_bank                  String?
  partner_account_number        String?
  partner_account_bank_number   String?
  partner_IBAN                  String?
  partner_SWIFT                 String?
  partner_BIC                   String?
  rossum_status                 String?
  rossum_annotation_id          String?
  rossum_annotation_url         String?
  rossum_document_id            String?
  rossum_document_url           String?
  rossum_annotation_json_url    String?
  rossum_annotation_xml_url     String?
  money_s3_url                  String?
  status                        String?
  invoice_state_id              String?   @db.Uuid
  assigned_user_id              String?   @db.Uuid
  assigned_account_id           String?   @db.Uuid
  visibility                    Boolean   @default(true)

  invoice_states invoice_States?       @relation(fields: [invoice_state_id], references: [id])
  users          Users?                @relation(fields: [assigned_user_id], references: [id])
  accounts       crm_Accounts?         @relation(fields: [assigned_account_id], references: [id])
  documents      DocumentsToInvoices[]

  @@index([invoice_state_id])
  @@index([assigned_user_id])
  @@index([assigned_account_id])
  @@index([last_updated_by])
  @@index([status])
  @@index([invoice_type])
  @@index([date_created])
  @@index([date_due])
  @@index([favorite])
  @@index([status, date_created])
}

model invoice_States {
  id                String     @id @default(uuid()) @db.Uuid
  name              String
  assigned_invoices Invoices[]
}

model Documents {
  id                     String    @id @default(uuid()) @db.Uuid
  v                      Int?      @map("__v")
  date_created           DateTime? @default(now())
  createdAt              DateTime? @default(now())
  last_updated           DateTime? @updatedAt
  updatedAt              DateTime? @updatedAt
  document_name          String
  created_by_user        String?   @db.Uuid
  createdBy              String?   @db.Uuid
  description            String?
  document_type          String?   @db.Uuid
  favourite              Boolean?
  document_file_mimeType String
  document_file_url      String
  status                 String?
  visibility             String?
  tags                   Json?     @db.JsonB
  key                    String?
  size                   Int?
  assigned_user          String?   @db.Uuid
  connected_documents    String[]

  created_by           Users?                        @relation("created_by_user", fields: [created_by_user], references: [id])
  assigned_to_user     Users?                        @relation("assigned_to_user", fields: [assigned_user], references: [id])
  documents_type       Documents_Types?              @relation(fields: [document_type], references: [id])
  document_system_type DocumentSystemType?           @default(OTHER)
  invoices             DocumentsToInvoices[]
  opportunities        DocumentsToOpportunities[]
  contacts             DocumentsToContacts[]
  tasks                DocumentsToTasks[]
  crm_accounts_tasks   DocumentsToCrmAccountsTasks[]
  leads                DocumentsToLeads[]
  accounts             DocumentsToAccounts[]

  @@index([created_by_user])
  @@index([assigned_user])
  @@index([document_type])
  @@index([createdBy])
  @@index([status])
  @@index([visibility])
  @@index([favourite])
  @@index([createdAt])
  @@index([document_system_type])
}

enum DocumentSystemType {
  INVOICE
  RECEIPT
  CONTRACT
  OFFER
  OTHER
}

model Documents_Types {
  id                 String      @id @default(uuid()) @db.Uuid
  v                  Int         @map("__v")
  name               String
  assigned_documents Documents[]
}

model Sections {
  id       String  @id @default(uuid()) @db.Uuid
  v        Int     @map("__v")
  board    String  @db.Uuid
  title    String
  position BigInt?
  tasks    Tasks[]

  board_relation Boards? @relation(fields: [board], references: [id])

  @@index([board])
}

model crm_Industry_Type {
  id       String         @id @default(uuid()) @db.Uuid
  v        Int            @map("__v")
  name     String
  accounts crm_Accounts[]
}

model modulStatus {
  id        String  @id @default(uuid()) @db.Uuid
  name      String
  isVisible Boolean
}

model Tasks {
  id           String      @id @default(uuid()) @db.Uuid
  v            Int         @map("__v")
  content      String?
  createdAt    DateTime?   @default(now())
  createdBy    String?     @db.Uuid
  updatedAt    DateTime?   @updatedAt
  updatedBy    String?     @db.Uuid
  dueDateAt    DateTime?   @default(now())
  lastEditedAt DateTime?   @default(now()) @updatedAt
  position     BigInt
  priority     String
  section      String?     @db.Uuid
  tags         Json?       @db.JsonB
  title        String
  likes        BigInt?     @default(0)
  user         String?     @db.Uuid
  taskStatus   taskStatus? @default(ACTIVE)

  comments         tasksComments[]
  assigned_user    Users?             @relation(fields: [user], references: [id])
  assigned_section Sections?          @relation(fields: [section], references: [id])
  documents        DocumentsToTasks[]

  @@index([user])
  @@index([section])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([priority])
  @@index([taskStatus])
  @@index([dueDateAt])
  @@index([createdAt])
  @@index([user, taskStatus])
}

model crm_Accounts_Tasks {
  id         String      @id @default(uuid()) @db.Uuid
  v          Int         @map("__v")
  content    String?
  createdAt  DateTime?   @default(now())
  createdBy  String?     @db.Uuid
  updatedAt  DateTime?   @updatedAt
  updatedBy  String?     @db.Uuid
  dueDateAt  DateTime?   @default(now())
  priority   String
  tags       Json?       @db.JsonB
  title      String
  likes      BigInt?     @default(0)
  user       String?     @db.Uuid
  taskStatus taskStatus? @default(ACTIVE)

  comments      tasksComments[]
  assigned_user Users?          @relation(fields: [user], references: [id])

  //CRM assigments
  account      String?                       @db.Uuid
  crm_accounts crm_Accounts?                 @relation(fields: [account], references: [id])
  documents    DocumentsToCrmAccountsTasks[]

  @@index([user])
  @@index([account])
  @@index([createdBy])
  @@index([updatedBy])
  @@index([priority])
  @@index([taskStatus])
  @@index([dueDateAt])
  @@index([createdAt])
  @@index([account, taskStatus])
}

model tasksComments {
  id                        String   @id @default(uuid()) @db.Uuid
  v                         Int      @map("__v")
  comment                   String
  createdAt                 DateTime @default(now())
  task                      String   @db.Uuid
  user                      String   @db.Uuid
  assigned_crm_account_task String?  @db.Uuid

  assigned_crm_account_task_task crm_Accounts_Tasks? @relation(fields: [assigned_crm_account_task], references: [id])
  assigned_task                  Tasks?              @relation(fields: [task], references: [id], onDelete: Cascade)
  assigned_user                  Users?              @relation(fields: [user], references: [id])

  @@index([task])
  @@index([user])
  @@index([assigned_crm_account_task])
}

enum taskStatus {
  ACTIVE
  PENDING
  COMPLETE
}

model TodoList {
  id          String @id @default(uuid()) @db.Uuid
  createdAt   String
  description String
  title       String
  url         String
  user        String
}

enum ActiveStatus {
  ACTIVE
  INACTIVE
  PENDING
}

model Users {
  id               String       @id @default(uuid()) @db.Uuid
  v                Int          @default(0) @map("__v")
  account_name     String?
  avatar           String?
  email            String       @unique
  is_account_admin Boolean      @default(false)
  is_admin         Boolean      @default(false)
  created_on       DateTime     @default(now())
  lastLoginAt      DateTime?
  name             String?
  password         String?
  username         String?
  userStatus       ActiveStatus @default(PENDING)
  userLanguage     Language     @default(en)

  tasksComment         tasksComments[]
  created_by_documents Documents[]           @relation("created_by_user")
  assigned_documents   Documents[]           @relation("assigned_to_user")
  tasks                Tasks[]
  crm_accounts_tasks   crm_Accounts_Tasks[]
  accounts             crm_Accounts[]        @relation("AccountAssignedTo")
  leads                crm_Leads[]           @relation("LeadAssignedTo")
  created_by_user      crm_Opportunities[]   @relation("created_by_user_relation")
  assigned_opportunity crm_Opportunities[]   @relation("assigned_to_user_relation")
  assigned_contacts    crm_Contacts[]        @relation("assigned_contacts")
  crated_contacts      crm_Contacts[]        @relation("created_contacts")
  openAi_key           openAi_keys[]
  assigned_invoices    Invoices[]
  assigned_contracts   crm_Contracts[]
  boards               Boards[]              @relation("assigned_user")
  watching_boards      BoardWatchers[]
  watching_accounts    AccountWatchers[]

  @@index([email])
  @@index([userStatus])
  @@index([userLanguage])
  @@index([is_admin])
  @@index([is_account_admin])
  @@index([created_on])
  @@index([lastLoginAt])
}

enum Language {
  cz
  en
  de
  uk
}

model system_Modules_Enabled {
  id       String  @id @default(uuid()) @db.Uuid
  v        Int     @map("__v")
  name     String
  enabled  Boolean
  position Int
}

model openAi_keys {
  id              String @id @default(uuid()) @db.Uuid
  v               Int    @map("__v")
  user            String @db.Uuid
  organization_id String
  api_key         String
  assigned_user   Users? @relation(fields: [user], references: [id])

  @@index([user])
}

model systemServices {
  id              String  @id @default(uuid()) @db.Uuid
  v               Int     @map("__v")
  name            String
  serviceUrl      String?
  serviceId       String?
  serviceKey      String?
  servicePassword String?
  servicePort     String?
  description     String?
}

model gpt_models {
  id          String     @id @default(uuid()) @db.Uuid
  v           Int        @map("__v")
  model       String
  description String?
  status      gptStatus?
  created_on  DateTime?  @default(now())
}

enum gptStatus {
  ACTIVE
  INACTIVE
}

// ============================================
// JUNCTION TABLES FOR MANY-TO-MANY RELATIONSHIPS
// ============================================

// Documents junction tables (7 tables)
model DocumentsToInvoices {
  document_id String @db.Uuid
  invoice_id  String @db.Uuid

  document Documents @relation(fields: [document_id], references: [id], onDelete: Cascade)
  invoice  Invoices  @relation(fields: [invoice_id], references: [id], onDelete: Cascade)

  @@id([document_id, invoice_id])
  @@index([document_id])
  @@index([invoice_id])
}

model DocumentsToOpportunities {
  document_id    String @db.Uuid
  opportunity_id String @db.Uuid

  document    Documents         @relation(fields: [document_id], references: [id], onDelete: Cascade)
  opportunity crm_Opportunities @relation(fields: [opportunity_id], references: [id], onDelete: Cascade)

  @@id([document_id, opportunity_id])
  @@index([document_id])
  @@index([opportunity_id])
}

model DocumentsToContacts {
  document_id String @db.Uuid
  contact_id  String @db.Uuid

  document Documents    @relation(fields: [document_id], references: [id], onDelete: Cascade)
  contact  crm_Contacts @relation(fields: [contact_id], references: [id], onDelete: Cascade)

  @@id([document_id, contact_id])
  @@index([document_id])
  @@index([contact_id])
}

model DocumentsToTasks {
  document_id String @db.Uuid
  task_id     String @db.Uuid

  document Documents @relation(fields: [document_id], references: [id], onDelete: Cascade)
  task     Tasks     @relation(fields: [task_id], references: [id], onDelete: Cascade)

  @@id([document_id, task_id])
  @@index([document_id])
  @@index([task_id])
}

model DocumentsToCrmAccountsTasks {
  document_id          String @db.Uuid
  crm_accounts_task_id String @db.Uuid

  document          Documents          @relation(fields: [document_id], references: [id], onDelete: Cascade)
  crm_accounts_task crm_Accounts_Tasks @relation(fields: [crm_accounts_task_id], references: [id], onDelete: Cascade)

  @@id([document_id, crm_accounts_task_id])
  @@index([document_id])
  @@index([crm_accounts_task_id])
}

model DocumentsToLeads {
  document_id String @db.Uuid
  lead_id     String @db.Uuid

  document Documents @relation(fields: [document_id], references: [id], onDelete: Cascade)
  lead     crm_Leads @relation(fields: [lead_id], references: [id], onDelete: Cascade)

  @@id([document_id, lead_id])
  @@index([document_id])
  @@index([lead_id])
}

model DocumentsToAccounts {
  document_id String @db.Uuid
  account_id  String @db.Uuid

  document Documents    @relation(fields: [document_id], references: [id], onDelete: Cascade)
  account  crm_Accounts @relation(fields: [account_id], references: [id], onDelete: Cascade)

  @@id([document_id, account_id])
  @@index([document_id])
  @@index([account_id])
}

// Watchers junction tables (2 tables)
model AccountWatchers {
  account_id String @db.Uuid
  user_id    String @db.Uuid

  account crm_Accounts @relation(fields: [account_id], references: [id], onDelete: Cascade)
  user    Users        @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@id([account_id, user_id])
  @@index([account_id])
  @@index([user_id])
}

model BoardWatchers {
  board_id String @db.Uuid
  user_id  String @db.Uuid

  board Boards @relation(fields: [board_id], references: [id], onDelete: Cascade)
  user  Users  @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@id([board_id, user_id])
  @@index([board_id])
  @@index([user_id])
}

// Contacts to Opportunities junction table
model ContactsToOpportunities {
  contact_id     String @db.Uuid
  opportunity_id String @db.Uuid

  contact     crm_Contacts      @relation(fields: [contact_id], references: [id], onDelete: Cascade)
  opportunity crm_Opportunities @relation(fields: [opportunity_id], references: [id], onDelete: Cascade)

  @@id([contact_id, opportunity_id])
  @@index([contact_id])
  @@index([opportunity_id])
}
